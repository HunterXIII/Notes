_МикишЕнко Виктор Витальевич_
# Лекция 1
**Сервер** - программа, которая обслуживает запросы клиентов по сети  
Виды серверов:
- **Веб-серверы** (Apache, Nginx)
- **Серверы приложений** (Django, Spring)
- **Почтовые серверы**
- **Сервера баз данных**  
  
## Архитектура Клиент-Сервер
**Сервер** - центральный узел, предоставляющий ресурсы и услуги  
**Клиент** - потребитель услуг, инициирующий запросы  
```mermaid
graph LR;
    id1["Клиент"] --запрос--> id2["Сервер"]
    id2 --ответ--> id1
    id2 --> id3["БД"]
```
## Модель OSI
1. Физический
2. Канальный
3. Сетевой
4. Транспортный
5. Сеансовый
6. Представительный 
7. Прикладной

## Модель TCP-IP
1. Канальный - Передача по сети
2. Сетевой - Доставка до компьютера
3. Транспортный(TCP, UDP) - Доставка до программы
4. Прикладной - Данные приложений

## Адресация в сети
**IP-адрес** - уникальный идентификатор компьютера в сети  
**Порт** - идентификатор конкретной программы на компьютере
- 0-1023 - Системные (требует прав администратора)
- 1024-49151 - Зарегистрированные (популярные приложения)
- 49152-65535 - Динамические (для клиентов)

## Сокет - полный адрес
**Сокет** = **IP-адрес** + **номер порта**  
**Сокет** - это конечная точка для двустороннего обмена данными между программами по сети  
**Сокет** - это объект в коде, через который можно:
- Устанавливать соединение
- Отправлять и получать данные
- Закрывать соединение

## Глоссарий
- **REST API** - мост между клиентом и сервером  
- **REST** - архитектурный стиль для написания веб-серверов
- **API** - интерфейс для взаимодействия программ
- **REST API** - Единый стандарт для обмена данными между клиентом и сервером   
- **framework** - основа для постройки приложений - готовый набор инструментов
- **Django** - это высокоуровневый фреймворк для быстрой разработки безопасных и поддерживаемых веб-приложений на Python
## Глоссарий
- **REST API** - мост между клиентом и сервером  
- **REST** - архитектурный стиль для написания веб-серверов
- **API** - интерфейс для взаимодействия программ
- **REST API** - Единый стандарт для обмена данными между клиентом и сервером   
- **framework** - основа для постройки приложений - готовый набор инструментов
- **Django** - это высокоуровневый фреймворк для быстрой разработки безопасных и поддерживаемых веб-приложений на Python

# Лекция 2
## Обработка множественных подключений
### Жизненный цикл TCP-соединения
1. socket() - "купить телефон"
2. bind() - "набрать номер телефона" 
3. listen() - "включить ожидания клиента"
4. accept() - "снять трубку на входящем звонке"  
`socket(), bind(), listen(), accept()` - системные вызовы (API операционной системы)  
  
### Многопоточные сервера
- (+) Относительная простота
- (-) Ограниченная масштабируемость
- (-) Риски
- (-) Ограниченные ресурсы  
  
Можно использовать **пул потоков** вместо **потока на клиента**, каждый пул обслуживает несколько клиентов  
### Неблокирующий I/O (вход/выход) и мультиплексирование
> Идея заключается в том, что один поток может опрашивать множество клиентов и обслуживать только тех, кто готов
  
#### Событийный цикл 
1. Спрашиваем ОС - какие сокеты готовы?
2. Обрабатываем готовые
3. Возвращаемся к шагу 1  
  
Используется в высоконагруженных системах

### Асинхронность
> Современный стандарт для новых проектов

Концепция async/await:  
1. `async` - объявление асинхронной функции
2. `await` - точка приостановки
```python
async def handle_client(client_socket):
    data = await client.recv(1024)
    result = await process_data(data)
    await client.send(result)
    
async.run() 
```
- Вся логика должна быть асинхронной
- Сложность отладки
- Подходит не для всех задач
- Трудно отслеживать выполнение  
  
Лучше использовать для I/O - задач, там где большой обмен информации
# Лекция 3
## HTTP
**HTTP (HyperText Transfer Protocol)** - это протокол прикладного уровня. Набор правил для обмена данными  
**Аналогия с письмом:**
- HTTP - текст письма
- TCP - служба доставки
- IP - адрес
- Ethernet/Wi-Fi - грузовик

### Ключевые принципы 
- **Запрос-Ответ:** клиент всегда инициализирует запрос, сервер всегда отвечает
- **Без состояния:** каждый новый запрос не помнит о предыдущем диалоге, для решения этой проблемы придумали Cookies и Sessions. 
- **Текстовый формат**
- **Простота отладки:** можно даже вручную написать HTTP-запрос в обычном текстовом редакторе
### Принцип работы веб-браузера

```mermaid
graph TD;
    a["URL"] --> b["DNS-поиск"] --> c["TCP-соединение"] --> d["HTTP-запрос"] --> e["Обработка на сервере"] --> f["HTTP-ответ"] --> g["Парсинг и рендеринг в браузере"] --> h["Страница на экране"]
```
### Из чего состоит HTTP-запрос?
- Стартовая строка - версия HTTP, метод
- Заголовки (мета-информация)
- Тело (данные, опционально)
```http
GET /catalog/book?id=123 HTTP/1.1 <-- Стартовая строка
Host: mysite.com         |
User-Agent: Mozilla...   | <-- Заголовки
Accept: text/html        |
Cookie: user=john_doe    |
(Тело обычно пустое у GET) <-- Тело
```
### Стартовая строка
1. Метод 
2. URI (путь) 
3. Версия HTTP
```http
POST /login HTTP/1.1
```
### Заголовки
> Это метаинформация, которая уточняет детали запроса, передаёт служебные данные
  
Примеры заголовков:
- Host
- User-Agent - какой браузер
- Content-Type - важен, если у запроса есть тело
- Content-Length - размер тела
- Cookie

### Тело
> Отделяются от заголовка пустой строкой, фактические данные, которые мы передаём серверу
  
**Что можно передавать:**
- Данные форм
- Загружаемые файлы
- JSON/XML
- Любые другие данные, которые нужны серверу

### Из чего состоит HTTP-ответ?
- Статусная строка (успех или ошибка)
- Заголовки (метаинформация)
- Тело
```http
HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Content-Length: 12540
Set-Cookie: session

<!DOCTYPE HTML>...
```

### Статусная строка
> Содержит коды состояний

- 1xx - Информационные
- 2xx - Успех
- 3xx - Перенаправление
- 4xx - Ошибка клиента
- 5xx - Ошибка сервера
### Заголовки ответа
> Метаинформация об ответе и инструкция для браузера. Они говорят браузеру, как обрабатывать полученные данные

### Тело
> Это и есть та самая веб-страница, картинка, файл JSON или любой другой ресурс, ради которого отправляли запрос

