_МикишЕнко Виктор Витальевич_
# Лекция 1
**Сервер** - программа, которая обслуживает запросы клиентов по сети  
Виды серверов:
- **Веб-серверы** (Apache, Nginx)
- **Серверы приложений** (Django, Spring)
- **Почтовые серверы**
- **Сервера баз данных**  
  
## Архитектура Клиент-Сервер
**Сервер** - центральный узел, предоставляющий ресурсы и услуги  
**Клиент** - потребитель услуг, инициирующий запросы  
```mermaid
graph LR;
    id1["Клиент"] --запрос--> id2["Сервер"]
    id2 --ответ--> id1
    id2 --> id3["БД"]
```
## Модель OSI
1. Физический
2. Канальный
3. Сетевой
4. Транспортный
5. Сеансовый
6. Представительный 
7. Прикладной

## Модель TCP-IP
1. Канальный - Передача по сети
2. Сетевой - Доставка до компьютера
3. Транспортный(TCP, UDP) - Доставка до программы
4. Прикладной - Данные приложений

## Адресация в сети
**IP-адрес** - уникальный идентификатор компьютера в сети  
**Порт** - идентификатор конкретной программы на компьютере
- 0-1023 - Системные (требует прав администратора)
- 1024-49151 - Зарегистрированные (популярные приложения)
- 49152-65535 - Динамические (для клиентов)

## Сокет - полный адрес
**Сокет** = **IP-адрес** + **номер порта**  
**Сокет** - это конечная точка для двустороннего обмена данными между программами по сети  
**Сокет** - это объект в коде, через который можно:
- Устанавливать соединение
- Отправлять и получать данные
- Закрывать соединение

## Глоссарий
- **REST API** - мост между клиентом и сервером  
- **REST** - архитектурный стиль для написания веб-серверов
- **API** - интерфейс для взаимодействия программ
- **REST API** - Единый стандарт для обмена данными между клиентом и сервером   
- **framework** - основа для постройки приложений - готовый набор инструментов
- **Django** - это высокоуровневый фреймворк для быстрой разработки безопасных и поддерживаемых веб-приложений на Python
## Глоссарий
- **REST API** - мост между клиентом и сервером  
- **REST** - архитектурный стиль для написания веб-серверов
- **API** - интерфейс для взаимодействия программ
- **REST API** - Единый стандарт для обмена данными между клиентом и сервером   
- **framework** - основа для постройки приложений - готовый набор инструментов
- **Django** - это высокоуровневый фреймворк для быстрой разработки безопасных и поддерживаемых веб-приложений на Python

# Лекция 2
## Обработка множественных подключений
### Жизненный цикл TCP-соединения
1. socket() - "купить телефон"
2. bind() - "набрать номер телефона" 
3. listen() - "включить ожидания клиента"
4. accept() - "снять трубку на входящем звонке"  
`socket(), bind(), listen(), accept()` - системные вызовы (API операционной системы)  
  
### Многопоточные сервера
- (+) Относительная простота
- (-) Ограниченная масштабируемость
- (-) Риски
- (-) Ограниченные ресурсы  
  
Можно использовать **пул потоков** вместо **потока на клиента**, каждый пул обслуживает несколько клиентов  
### Неблокирующий I/O (вход/выход) и мультиплексирование
> Идея заключается в том, что один поток может опрашивать множество клиентов и обслуживать только тех, кто готов
  
#### Событийный цикл 
1. Спрашиваем ОС - какие сокеты готовы?
2. Обрабатываем готовые
3. Возвращаемся к шагу 1  
  
Используется в высоконагруженных системах

### Асинхронность
> Современный стандарт для новых проектов

Концепция async/await:  
1. `async` - объявление асинхронной функции
2. `await` - точка приостановки
```python
async def handle_client(client_socket):
    data = await client.recv(1024)
    result = await process_data(data)
    await client.send(result)
    
async.run() 
```
- Вся логика должна быть асинхронной
- Сложность отладки
- Подходит не для всех задач
- Трудно отслеживать выполнение  
  
Лучше использовать для I/O - задач, там где большой обмен информации
